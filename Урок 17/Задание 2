import random

def generate_secret_word():
    digits = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
    secret_word = ''
    for _ in range(4):
        i = random.randint(0, len(digits) - 1)
        secret_word += str(digits[i])
        digits.pop(i)
    
    return secret_word


def calc_bulls(user_word, secret_word):
    counter = 0
    for i in range(len(user_word)):
        if user_word[i] != secret_word[i] and user_word[i] in secret_word:
            counter += 1

    return counter


def calc_cows(user_word, secret_word):
    counter = 0
    for i in range(len(secret_word)):
        if user_word[i] == secret_word[i]:
            counter += 1

    return counter


def start_game():
    while True:
        secret_word = generate_secret_word()

        print('Найди загаданное число')
        while True:
            user_word = input()

            for i in range(len(user_word)):
                repeater = user_word.count(user_word[i])
                if repeater > 1:
                    break

            if len(user_word) != len(secret_word) or not user_word.isdigit() or repeater > 1:
                print('Введите корректные данные')
                continue
            else:
                break

        count_bulls = calc_bulls(user_word, secret_word)
        count_cows = calc_cows(user_word, secret_word)

        print('Быков -', count_bulls, 'коров -', count_cows)

        if count_bulls == 4:
            print('Ура! Победа!')
            break


def play():
    start_game()
    while True:
        print('Хотите сыграть еще? Y(Д)/N(Н)')
        answer = input()

        if answer == 'Y' or answer == 'y' or answer == 'Д' or answer == 'д':
            start_game()
        elif answer == 'N' or answer == 'n' or answer == 'Н' or answer == 'н':
            print('Спасибо за игру. Ждем вас еще!')
            break
        else:
            print('Не понял ваш ответ...')
            continue

play()
